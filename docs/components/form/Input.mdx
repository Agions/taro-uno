# Input 输入框

用于接收用户输入的文本。

## 功能介绍

Input 组件是表单中最常用的组件之一，提供了多种类型和状态，适用于各种输入场景：

- 文本输入
- 密码输入
- 数字输入
- 多行文本输入
- 带前缀和后缀的输入框
- 各种验证状态

## 基本用法

### 默认输入框

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  return <Input placeholder="请输入内容" />;
};

export default App;
```

### 受控组件

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="请输入内容"
    />
  );
};

export default App;
```

### 禁用状态

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  return <Input placeholder="禁用输入框" disabled />;
};

export default App;
```

### 带清除按钮

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  const handleClear = () => {
    setValue('');
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="带清除按钮"
      clearable
      onClear={handleClear}
    />
  );
};

export default App;
```

### 密码输入

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="请输入密码"
      type="password"
    />
  );
};

export default App;
```

### 数字输入

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="请输入数字"
      type="number"
    />
  );
};

export default App;
```

### 不同尺寸

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';
import { View } from '@tarojs/components';

const App = () => {
  return (
    <View style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
      <Input placeholder="大号输入框" size="large" />
      <Input placeholder="中号输入框" size="medium" />
      <Input placeholder="小号输入框" size="small" />
    </View>
  );
};

export default App;
```

### 带标签

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  return <Input placeholder="带标签输入框" label="用户名" />;
};

export default App;
```

### 验证状态

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';
import { View } from '@tarojs/components';

const App = () => {
  return (
    <View style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
      <Input placeholder="默认状态" />
      <Input placeholder="成功状态" status="success" />
      <Input placeholder="警告状态" status="warning" />
      <Input placeholder="错误状态" status="error" />
    </View>
  );
};

export default App;
```

### 自定义验证函数

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');
  const [status, setStatus] = useState<'success' | 'warning' | 'error' | ''>('');
  const [errorMessage, setErrorMessage] = useState('');

  const validateEmail = (email: string) => {
    const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return regex.test(email);
  };

  const handleBlur = () => {
    if (value && !validateEmail(value)) {
      setStatus('error');
      setErrorMessage('请输入有效的邮箱地址');
    } else if (value) {
      setStatus('success');
      setErrorMessage('');
    } else {
      setStatus('');
      setErrorMessage('');
    }
  };

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      onBlur={handleBlur}
      placeholder="请输入邮箱"
      status={status}
      errorMessage={errorMessage}
    />
  );
};

export default App;
```

### 多行输入框

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="多行输入框"
      type="textarea"
      rows={4}
    />
  );
};

export default App;
```

### 带前缀后缀

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';
import { Icon } from '@/components/basic/Icon';
import { View } from '@tarojs/components';

const App = () => {
  return (
    <View style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
      <Input
        placeholder="带前缀"
        prefix={<Icon type="user" />}
      />
      <Input
        placeholder="带后缀"
        suffix={<Icon type="search" />}
      />
      <Input
        placeholder="带前后缀"
        prefix={<Icon type="lock" />}
        suffix={<Icon type="eye" />}
      />
    </View>
  );
};

export default App;
```

### 特殊类型输入

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';
import { View } from '@tarojs/components';

const App = () => {
  return (
    <View style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
      <Input placeholder="手机号" type="tel" />
      <Input placeholder="URL" type="url" />
      <Input placeholder="邮箱" type="email" />
      <Input placeholder="身份证" type="idcard" />
    </View>
  );
};

export default App;
```

### 只读模式

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  return <Input value="只读内容" readOnly />;
};

export default App;
```

### 自定义样式

```tsx
import React from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  return (
    <Input
      placeholder="自定义样式"
      style={{
        borderRadius: 8,
        backgroundColor: '#f5f5f5',
        borderColor: '#d9d9d9',
      }}
    />
  );
};

export default App;
```

### 密码可见性切换

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';
import { Icon } from '@/components/basic/Icon';

const App = () => {
  const [value, setValue] = useState('');
  const [passwordVisible, setPasswordVisible] = useState(false);

  const handleChange = (e: Taro.ChangeEvent) => {
    setValue(e.detail.value);
  };

  const togglePasswordVisible = () => {
    setPasswordVisible(!passwordVisible);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="请输入密码"
      type={passwordVisible ? 'text' : 'password'}
      suffix={
        <Icon
          type={passwordVisible ? 'eye' : 'eye-off'}
          onClick={togglePasswordVisible}
        />
      }
    />
  );
};

export default App;
```

### 输入格式化

```tsx
import React, { useState } from 'react';
import { Input } from '@/components/form/Input';

const App = () => {
  const [value, setValue] = useState('');

  // 格式化手机号
  const handleChange = (e: Taro.ChangeEvent) => {
    let inputValue = e.detail.value.replace(/\D/g, ''); // 只保留数字
    if (inputValue.length > 3) {
      inputValue = inputValue.slice(0, 3) + ' ' + inputValue.slice(3);
    }
    if (inputValue.length > 8) {
      inputValue = inputValue.slice(0, 8) + ' ' + inputValue.slice(8, 11);
    }
    setValue(inputValue);
  };

  return (
    <Input
      value={value}
      onChange={handleChange}
      placeholder="手机号格式：138 0000 0000"
      type="tel"
    />
  );
};

export default App;
```

## API

### InputProps

| 参数 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| value | `string` | - | 输入框的值 |
| defaultValue | `string` | - | 输入框的默认值 |
| type | `'text' \| 'number' \| 'password' \| 'tel' \| 'url' \| 'email' \| 'idcard' \| 'textarea'` | `'text'` | 输入框类型 |
| placeholder | `string` | - | 占位符 |
| size | `'small' \| 'medium' \| 'large'` | `'medium'` | 输入框尺寸 |
| disabled | `boolean` | `false` | 是否禁用 |
| readOnly | `boolean` | `false` | 是否只读 |
| clearable | `boolean` | `false` | 是否显示清除按钮 |
| maxLength | `number` | - | 最大输入长度 |
| minLength | `number` | - | 最小输入长度 |
| rows | `number` | 4 | 多行输入框的行数（仅当type="textarea"时有效） |
| autoHeight | `boolean` | `false` | 多行输入框是否自动调整高度（仅当type="textarea"时有效） |
| status | `'success' \| 'warning' \| 'error' \| ''` | `''` | 输入框状态 |
| errorMessage | `string` | - | 错误提示信息 |
| label | `string \| React.ReactNode` | - | 输入框标签 |
| prefix | `React.ReactNode` | - | 前缀内容 |
| suffix | `React.ReactNode` | - | 后缀内容 |
| onChange | `(e: Taro.ChangeEvent) => void` | - | 输入值变化时的回调 |
| onFocus | `(e: Taro.FocusEvent) => void` | - | 获取焦点时的回调 |
| onBlur | `(e: Taro.BlurEvent) => void` | - | 失去焦点时的回调 |
| onClear | `() => void` | - | 点击清除按钮时的回调 |
| onConfirm | `(e: Taro.ConfirmEvent) => void` | - | 点击键盘确认按钮时的回调 |
| style | `Taro.RNViewStyle` | - | 自定义样式 |
| className | `string` | - | 自定义类名 |

### InputRef

| 方法 | 说明 |
| --- | --- |
| focus() | 获取焦点 |
| blur() | 失去焦点 |
| clear() | 清空输入框内容 |
| getValue() | 获取输入框当前值 |
| setValue(value: string) | 设置输入框的值 |

### 类型定义

```typescript
type InputType = 'text' | 'number' | 'password' | 'tel' | 'url' | 'email' | 'idcard' | 'textarea';
type InputSize = 'small' | 'medium' | 'large';
type InputStatus = 'success' | 'warning' | 'error' | '';
```

## 使用提示

1. **输入类型选择**：
   - 使用适当的 `type` 属性可以获得更好的原生输入体验
   - 例如，`type="tel"` 会在移动端显示数字键盘

2. **受控组件 vs 非受控组件**：
   - 推荐使用受控组件模式，通过 `value` 和 `onChange` 来管理输入框的值
   - 非受控组件可以使用 `defaultValue` 和 `ref` 来获取值

3. **验证状态**：
   - 使用 `status` 属性可以提供视觉反馈
   - 配合 `errorMessage` 可以显示详细的错误信息

4. **性能优化**：
   - 避免在 `onChange` 事件中执行复杂逻辑
   - 如果需要实时验证，可以使用防抖或节流

5. **无障碍访问**：
   - 为输入框添加适当的 `placeholder`
   - 为必填字段添加明确的提示
   - 确保验证错误信息清晰可见

6. **自定义前缀和后缀**：
   - 可以使用 `prefix` 和 `suffix` 属性添加图标或文本
   - 这些元素可以增强用户体验，提供更多上下文信息

7. **密码输入**：
   - 可以使用 `type="password"` 来创建密码输入框
   - 配合 `suffix` 属性可以实现密码可见性切换功能

8. **多行输入**：
   - 使用 `type="textarea"` 可以创建多行输入框
   - `rows` 属性可以设置默认行数
   - `autoHeight` 属性可以让输入框根据内容自动调整高度