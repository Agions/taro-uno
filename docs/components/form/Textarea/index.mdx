# Textarea æ–‡æœ¬åŸŸ

æ–‡æœ¬åŸŸç»„ä»¶ç”¨äºå¤šè¡Œæ–‡æœ¬è¾“å…¥ï¼Œæ”¯æŒè‡ªåŠ¨é«˜åº¦è°ƒæ•´ã€å­—ç¬¦è®¡æ•°ã€æ¸…é™¤æŒ‰é’®ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒå¤šè¡Œæ–‡æœ¬è¾“å…¥
- è‡ªåŠ¨é«˜åº¦è°ƒæ•´
- å­—ç¬¦è®¡æ•°ä¸é™åˆ¶
- æ¸…é™¤æŒ‰é’®
- è‡ªå®šä¹‰å‰ç¼€/åç¼€
- å¤šç§å°ºå¯¸å’Œå˜ä½“æ ·å¼
- è¡¨å•éªŒè¯æ”¯æŒ
- æ— éšœç¢æ”¯æŒ

## åŸºæœ¬ç”¨æ³•

```tsx
import { Textarea } from '@taro-uno/components'

function BasicTextarea() {
  return (
    <Textarea placeholder="è¯·è¾“å…¥å†…å®¹" />
  )
}
```

## ä½¿ç”¨ç¤ºä¾‹

### å—æ§æ¨¡å¼

```tsx
import { useState } from 'react'
import { Textarea } from '@taro-uno/components'

function ControlledTextarea() {
  const [value, setValue] = useState('')

  return (
    <Textarea
      value={value}
      onChange={setValue}
      placeholder="è¯·è¾“å…¥å†…å®¹"
    />
  )
}
```

### è‡ªåŠ¨è°ƒæ•´é«˜åº¦

```tsx
import { Textarea } from '@taro-uno/components'

function AutoHeightTextarea() {
  return (
    <Textarea
      autoHeight
      placeholder="è‡ªåŠ¨è°ƒæ•´é«˜åº¦"
      rows={2}
      minRows={2}
      maxRows={5}
    />
  )
}
```

### å­—ç¬¦è®¡æ•°

```tsx
import { Textarea } from '@taro-uno/components'

function TextareaWithCounter() {
  return (
    <Textarea
      maxLength={100}
      showCount
      placeholder="æœ€å¤šè¾“å…¥100ä¸ªå­—ç¬¦"
    />
  )
}
```

### æ¸…é™¤æŒ‰é’®

```tsx
import { Textarea } from '@taro-uno/components'

function TextareaWithClearButton() {
  return (
    <Textarea
      clearable
      clearTrigger="focus"
      placeholder="å¸¦æ¸…é™¤æŒ‰é’®"
    />
  )
}
```

### å‰ç¼€å’Œåç¼€

```tsx
import { Textarea } from '@taro-uno/components'

function TextareaWithPrefixSuffix() {
  return (
    <Textarea
      prefix={<span>ğŸ“</span>}
      suffix={<span>å­—ç¬¦</span>}
      placeholder="å¸¦å‰ç¼€å’Œåç¼€"
    />
  )
}
```

### ä¸åŒå°ºå¯¸

```tsx
import { Textarea } from '@taro-uno/components'

function TextareaSizes() {
  return (
    <>
      <Textarea size="sm" placeholder="å°å°ºå¯¸" />
      <Textarea size="md" placeholder="ä¸­ç­‰å°ºå¯¸" />
      <Textarea size="lg" placeholder="å¤§å°ºå¯¸" />
    </>
  )
}
```

### ä¸åŒå˜ä½“

```tsx
import { Textarea } from '@taro-uno/components'

function TextareaVariants() {
  return (
    <>
      <Textarea variant="outlined" placeholder="è½®å»“æ ·å¼" />
      <Textarea variant="filled" placeholder="å¡«å……æ ·å¼" />
      <Textarea variant="underlined" placeholder="ä¸‹åˆ’çº¿æ ·å¼" />
    </>
  )
}
```

### ç¦ç”¨å’Œåªè¯»

```tsx
import { Textarea } from '@taro-uno/components'

function DisabledReadonlyTextarea() {
  return (
    <>
      <Textarea disabled value="ç¦ç”¨çŠ¶æ€" />
      <Textarea readonly value="åªè¯»çŠ¶æ€" />
    </>
  )
}
```

### è¡¨å•éªŒè¯

```tsx
import { useState } from 'react'
import { Textarea } from '@taro-uno/components'

function ValidatedTextarea() {
  return (
    <Textarea
      rules={[
        { required: true, message: 'å†…å®¹ä¸èƒ½ä¸ºç©º' },
        { minLength: 5, message: 'æœ€å°‘è¾“å…¥5ä¸ªå­—ç¬¦' }
      ]}
      validateTrigger="onBlur"
      placeholder="å¸¦éªŒè¯è§„åˆ™"
    />
  )
}
```

### è‡ªå®šä¹‰æ ·å¼

```tsx
import { Textarea } from '@taro-uno/components'

function CustomStyledTextarea() {
  return (
    <Textarea
      bordered={false}
      resize="both"
      placeholder="è‡ªå®šä¹‰æ ·å¼"
      style={{ borderRadius: '8px', backgroundColor: '#f5f5f5' }}
    />
  )
}
```

## API

### TextareaProps

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| value | `string` | - | æ–‡æœ¬åŸŸå†…å®¹ï¼ˆå—æ§æ¨¡å¼ï¼‰ |
| defaultValue | `string` | `''` | é»˜è®¤å€¼ï¼ˆéå—æ§æ¨¡å¼ï¼‰ |
| placeholder | `string` | - | å ä½ç¬¦ |
| size | `TextareaSize` | `'md'` | æ–‡æœ¬åŸŸå°ºå¯¸ |
| variant | `TextareaVariant` | `'outlined'` | æ–‡æœ¬åŸŸå˜ä½“ |
| status | `TextareaStatus` | `'normal'` | æ–‡æœ¬åŸŸçŠ¶æ€ |
| disabled | `boolean` | `false` | æ˜¯å¦ç¦ç”¨ |
| readonly | `boolean` | `false` | æ˜¯å¦åªè¯» |
| clearable | `boolean` | `false` | æ˜¯å¦æ˜¾ç¤ºæ¸…é™¤æŒ‰é’® |
| clearTrigger | `ClearTrigger` | `'focus'` | æ¸…é™¤æŒ‰é’®è§¦å‘æ—¶æœº |
| maxLength | `number` | - | æœ€å¤§é•¿åº¦ |
| minLength | `number` | - | æœ€å°é•¿åº¦ |
| rows | `number` | `3` | è¡Œæ•° |
| minRows | `number` | `1` | æœ€å°è¡Œæ•° |
| maxRows | `number` | `10` | æœ€å¤§è¡Œæ•° |
| autoHeight | `boolean` | `false` | æ˜¯å¦è‡ªåŠ¨è°ƒæ•´é«˜åº¦ |
| autoHeightStrategy | `AutoHeightStrategy` | `'content'` | è‡ªåŠ¨è°ƒæ•´é«˜åº¦ç­–ç•¥ |
| resize | `TextareaResize` | `'vertical'` | è°ƒæ•´å¤§å°æ–¹å¼ |
| showCount | `boolean` | `false` | æ˜¯å¦æ˜¾ç¤ºå­—ç¬¦è®¡æ•° |
| counterPosition | `CounterPosition` | `'bottom-right'` | å­—ç¬¦è®¡æ•°æ˜¾ç¤ºä½ç½® |
| showWordLimit | `boolean` | `false` | æ˜¯å¦æ˜¾ç¤ºå­—æ•°é™åˆ¶ |
| autoFocus | `boolean` | `false` | æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹ |
| bordered | `boolean` | `true` | æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡† |
| label | `ReactNode` | - | æ ‡ç­¾æ–‡æœ¬ |
| helperText | `ReactNode` | - | è¾…åŠ©æ–‡æœ¬ |
| errorText | `ReactNode` | - | é”™è¯¯æ–‡æœ¬ |
| prefix | `ReactNode` | - | å‰ç¼€å›¾æ ‡æˆ–æ–‡æœ¬ |
| suffix | `ReactNode` | - | åç¼€å›¾æ ‡æˆ–æ–‡æœ¬ |
| rules | `TextareaRule[]` | - | éªŒè¯è§„åˆ™ |
| validateTrigger | `'onChange' \| 'onBlur' \| 'onFocus' \| 'onSubmit'` | `'onBlur'` | éªŒè¯è§¦å‘æ—¶æœº |
| immediate | `boolean` | `false` | æ˜¯å¦ç«‹å³éªŒè¯ |
| validator | `(value: string) => boolean \| string \| Promise<boolean \| string>` | - | è‡ªå®šä¹‰éªŒè¯å‡½æ•° |
| onChange | `(value: string, event: ITouchEvent) => void` | - | å€¼å˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•° |
| onFocus | `(event: ITouchEvent) => void` | - | èšç„¦äº‹ä»¶å¤„ç†å‡½æ•° |
| onBlur | `(event: ITouchEvent) => void` | - | å¤±ç„¦äº‹ä»¶å¤„ç†å‡½æ•° |
| onInput | `(value: string, event: ITouchEvent) => void` | - | è¾“å…¥äº‹ä»¶å¤„ç†å‡½æ•° |
| onClear | `(event: ITouchEvent) => void` | - | æ¸…é™¤äº‹ä»¶å¤„ç†å‡½æ•° |
| onConfirm | `(value: string, event: ITouchEvent) => void` | - | ç¡®è®¤äº‹ä»¶å¤„ç†å‡½æ•° |
| onKeyboardHeightChange | `(height: number, event: ITouchEvent) => void` | - | é”®ç›˜é«˜åº¦å˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•° |
| onHeightChange | `(height: number, event: ITouchEvent) => void` | - | é«˜åº¦å˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•° |
| onValidate | `(result: TextareaValidationResult) => void` | - | éªŒè¯äº‹ä»¶å¤„ç†å‡½æ•° |
| className | `string` | - | è‡ªå®šä¹‰æ ·å¼ç±»å |
| style | `CSSProperties` | - | è‡ªå®šä¹‰æ ·å¼ |
| containerClassName | `string` | - | å®¹å™¨æ ·å¼ç±»å |
| containerStyle | `CSSProperties` | - | å®¹å™¨æ ·å¼ |
| block | `boolean` | `true` | æ˜¯å¦å—çº§æ˜¾ç¤º |
| accessible | `boolean` | `true` | æ— éšœç¢æ”¯æŒ |
| accessibilityLabel | `string` | - | æ— éšœç¢æ ‡ç­¾ |
| accessibilityRole | `string` | `'textbox'` | æ— éšœç¢è§’è‰² |
| accessibilityState | `object` | - | æ— éšœç¢çŠ¶æ€ |

### TextareaRef

| æ–¹æ³• | ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| getValue | `() => string` | è·å–æ–‡æœ¬åŸŸå€¼ |
| setValue | `(value: string) => void` | è®¾ç½®æ–‡æœ¬åŸŸå€¼ |
| focus | `() => void` | èšç„¦æ–‡æœ¬åŸŸ |
| blur | `() => void` | å¤±ç„¦æ–‡æœ¬åŸŸ |
| select | `() => void` | é€‰æ‹©æ–‡æœ¬ |
| setSelectionRange | `(start: number, end: number) => void` | è®¾ç½®é€‰ä¸­æ–‡æœ¬èŒƒå›´ |
| getSelectionRange | `() => { start: number; end: number }` | è·å–é€‰ä¸­æ–‡æœ¬èŒƒå›´ |
| setDisabled | `(disabled: boolean) => void` | è®¾ç½®ç¦ç”¨çŠ¶æ€ |
| setReadonly | `(readonly: boolean) => void` | è®¾ç½®åªè¯»çŠ¶æ€ |
| setStatus | `(status: TextareaStatus) => void` | è®¾ç½®æ–‡æœ¬åŸŸçŠ¶æ€ |
| getStatus | `() => TextareaStatus` | è·å–æ–‡æœ¬åŸŸçŠ¶æ€ |
| validate | `() => Promise<TextareaValidationResult>` | éªŒè¯æ–‡æœ¬åŸŸå€¼ |
| clear | `() => void` | æ¸…é™¤æ–‡æœ¬åŸŸå€¼ |
| reset | `() => void` | é‡ç½®æ–‡æœ¬åŸŸ |
| adjustHeight | `() => void` | è°ƒæ•´é«˜åº¦ |
| getHeight | `() => number` | è·å–å½“å‰é«˜åº¦ |
| getScrollHeight | `() => number` | è·å–æ»šåŠ¨é«˜åº¦ |
| scrollToBottom | `() => void` | æ»šåŠ¨åˆ°åº•éƒ¨ |
| scrollToTop | `() => void` | æ»šåŠ¨åˆ°é¡¶éƒ¨ |
| getValidationResult | `() => TextareaValidationResult \| null` | è·å–éªŒè¯ç»“æœ |

### ç±»å‹å®šä¹‰

#### TextareaSize

```ts
type TextareaSize = 'sm' | 'md' | 'lg'
```

#### TextareaVariant

```ts
type TextareaVariant = 'outlined' | 'filled' | 'underlined'
```

#### TextareaStatus

```ts
type TextareaStatus = 'normal' | 'error' | 'warning' | 'success' | 'disabled'
```

#### TextareaResize

```ts
type TextareaResize = 'none' | 'both' | 'horizontal' | 'vertical' | 'auto'
```

#### AutoHeightStrategy

```ts
type AutoHeightStrategy = 'content' | 'rows' | 'max-rows'
```

#### CounterPosition

```ts
type CounterPosition = 'top-right' | 'bottom-right' | 'top-left' | 'bottom-left'
```

#### ClearTrigger

```ts
type ClearTrigger = 'always' | 'focus' | 'never'
```

#### TextareaRule

```ts
interface TextareaRule {
  required?: boolean
  message?: string
  pattern?: RegExp
  minLength?: number
  maxLength?: number
  validator?: (value: string) => boolean | string | Promise<boolean | string>
}
```

#### TextareaValidationResult

```ts
interface TextareaValidationResult {
  valid: boolean
  message?: string
  ruleIndex?: number
  timestamp: number
  value: string
}
```

## ä½¿ç”¨æç¤º

1. **å—æ§ä¸éå—æ§æ¨¡å¼**ï¼š
   - ä½¿ç”¨ `value` å’Œ `onChange` å®ç°å—æ§æ¨¡å¼
   - ä½¿ç”¨ `defaultValue` å®ç°éå—æ§æ¨¡å¼

2. **è‡ªåŠ¨é«˜åº¦è°ƒæ•´**ï¼š
   - è®¾ç½® `autoHeight` ä¸º `true` å¯ç”¨è‡ªåŠ¨é«˜åº¦è°ƒæ•´
   - ä½¿ç”¨ `minRows` å’Œ `maxRows` é™åˆ¶é«˜åº¦èŒƒå›´

3. **è¡¨å•éªŒè¯**ï¼š
   - ä½¿ç”¨ `rules` å±æ€§å®šä¹‰éªŒè¯è§„åˆ™
   - è‡ªå®šä¹‰éªŒè¯å‡½æ•° `validator` æ”¯æŒå¼‚æ­¥éªŒè¯
   - é€šè¿‡ `validateTrigger` æ§åˆ¶éªŒè¯æ—¶æœº

4. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - å¯¹äºé•¿æ–‡æœ¬è¾“å…¥ï¼Œè€ƒè™‘é™åˆ¶ `maxLength`
   - è‡ªåŠ¨é«˜åº¦è°ƒæ•´åœ¨å¤§é‡æ–‡æœ¬æ—¶å¯èƒ½å½±å“æ€§èƒ½ï¼Œå¯é€‚å½“é™åˆ¶ `maxRows`

5. **æ— éšœç¢æ”¯æŒ**ï¼š
   - è®¾ç½® `accessible` ä¸º `true` å¯ç”¨æ— éšœç¢æ”¯æŒ
   - ä½¿ç”¨ `accessibilityLabel` æä¾›å±å¹•é˜…è¯»å™¨æ”¯æŒ
   - `accessibilityState` å¯è®¾ç½®é¢å¤–çš„æ— éšœç¢çŠ¶æ€

## æµè§ˆå™¨å…¼å®¹æ€§

| æµè§ˆå™¨ | ç‰ˆæœ¬ |
| --- | --- |
| Chrome | âœ… æ”¯æŒ |
| Firefox | âœ… æ”¯æŒ |
| Safari | âœ… æ”¯æŒ |
| Edge | âœ… æ”¯æŒ |
| å¾®ä¿¡å°ç¨‹åº | âœ… æ”¯æŒ |
| æ”¯ä»˜å®å°ç¨‹åº | âœ… æ”¯æŒ |
| ç™¾åº¦å°ç¨‹åº | âœ… æ”¯æŒ |
| æŠ–éŸ³å°ç¨‹åº | âœ… æ”¯æŒ |
| QQå°ç¨‹åº | âœ… æ”¯æŒ |

## æ— éšœç¢æ”¯æŒ

- æ”¯æŒé”®ç›˜å¯¼èˆª
- æä¾›å±å¹•é˜…è¯»å™¨æ”¯æŒ
- æ”¯æŒæ— éšœç¢æ ‡ç­¾å’Œè§’è‰²
- æ”¯æŒæ— éšœç¢çŠ¶æ€ç®¡ç†

Textarea ç»„ä»¶éµå¾ª WAI-ARIA æ ‡å‡†ï¼Œæä¾›è‰¯å¥½çš„æ— éšœç¢ä½“éªŒã€‚