---
title: Cascader 级联选择器
sidebarDepth: 1
---

# Cascader 级联选择器

级联选择器用于从多层级数据中进行选择，通常用于地址、分类等场景。

## 功能介绍

- 支持单层级或多层级数据选择
- 支持单选和多选模式
- 支持搜索过滤功能
- 支持自定义选项渲染
- 支持异步加载数据
- 支持自定义显示格式
- 提供多种尺寸和变体样式
- 支持无障碍访问

## 基本用法

```jsx
import { Cascader } from 'taro-uno';

const options = [
  {
    value: 'zhejiang',
    label: '浙江',
    children: [
      {
        value: 'hangzhou',
        label: '杭州',
        children: [
          { value: 'xihu', label: '西湖' }
        ]
      },
      {
        value: 'ningbo',
        label: '宁波'
      }
    ]
  },
  {
    value: 'jiangsu',
    label: '江苏',
    children: [
      {
        value: 'nanjing',
        label: '南京'
      }
    ]
  }
];

function App() {
  return <Cascader options={options} placeholder="请选择地区" />;
}
```

## 使用示例

### 基础级联选择

```jsx
<Cascader options={options} placeholder="请选择地区" />
```

### 默认选中

```jsx
<Cascader options={options} defaultValue={['zhejiang', 'hangzhou', 'xihu']} placeholder="请选择地区" />
```

### 多选模式

```jsx
<Cascader options={options} multiple placeholder="请选择地区" />
```

### 搜索功能

```jsx
<Cascader options={options} showSearch placeholder="请选择地区" />
```

### 显示完整路径

```jsx
<Cascader options={options} showPath pathSeparator=" > " placeholder="请选择地区" />
```

### 自定义尺寸

```jsx
<Cascader options={options} size="small" placeholder="小型" />
<Cascader options={options} size="medium" placeholder="中型" />
<Cascader options={options} size="large" placeholder="大型" />
```

### 不同变体

```jsx
<Cascader options={options} variant="outlined" placeholder="边框样式" />
<Cascader options={options} variant="filled" placeholder="填充样式" />
<Cascader options={options} variant="borderless" placeholder="无边框样式" />
```

### 状态样式

```jsx
<Cascader options={options} status="error" placeholder="错误状态" />
<Cascader options={options} status="warning" placeholder="警告状态" />
<Cascader options={options} status="success" placeholder="成功状态" />
```

### 禁用状态

```jsx
<Cascader options={options} disabled placeholder="禁用状态" />
```

### 异步加载

```jsx
function App() {
  const [options, setOptions] = useState([
    { value: 'province1', label: '省份1', isLeaf: false },
    { value: 'province2', label: '省份2', isLeaf: false }
  ]);

  const loadData = (selectedOptions) => {
    const targetOption = selectedOptions[selectedOptions.length - 1];
    targetOption.loading = true;

    // 模拟异步加载
    setTimeout(() => {
      targetOption.loading = false;
      targetOption.children = [
        { value: `${targetOption.value}-city1`, label: `${targetOption.label}-城市1` },
        { value: `${targetOption.value}-city2`, label: `${targetOption.label}-城市2` }
      ];
      setOptions([...options]);
    }, 1000);
  };

  return (
    <Cascader
      options={options}
      loadData={loadData}
      placeholder="请选择地区"
    />
  );
}
```

## API 参数

### CascaderProps

| 参数名 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| options | `CascaderOption[]` | [] | 选项数据 |
| value | `CascaderValue \| null` | - | 当前选中的值（受控模式） |
| defaultValue | `CascaderValue \| null` | null | 默认选中的值（非受控模式） |
| placeholder | `string` | '请选择' | 占位符文本 |
| disabled | `boolean` | false | 是否禁用 |
| readonly | `boolean` | false | 是否只读 |
| allowClear | `boolean` | false | 是否允许清除 |
| size | `CascaderSize` | 'medium' | 尺寸 |
| status | `CascaderStatus` | 'default' | 状态 |
| variant | `CascaderVariant` | 'outlined' | 变体 |
| expandTrigger | `CascaderExpandTrigger` | 'click' | 展开方式 |
| direction | `CascaderDirection` | 'ltr' | 方向 |
| multiple | `boolean` | false | 是否多选 |
| showSearch | `boolean` | false | 是否显示搜索框 |
| bordered | `boolean` | true | 是否显示边框 |
| inputReadOnly | `boolean` | false | 输入框是否只读 |
| maxTagCount | `number` | - | 最大标签数量 |
| maxTagPlaceholder | `ReactNode` | - | 最大标签占位符 |
| open | `boolean` | - | 是否展开（受控模式） |
| defaultOpen | `boolean` | false | 默认是否展开 |
| placement | `'bottomLeft' \| 'bottomRight' \| 'topLeft' \| 'topRight'` | 'bottomLeft' | 弹出层位置 |
| popupStyle | `CSSProperties` | - | 弹出层样式 |
| popupClassName | `string` | - | 弹出层类名 |
| getPopupContainer | `() => HTMLElement` | - | 弹出层容器 |
| suffixIcon | `ReactNode` | - | 后缀图标 |
| prefix | `ReactNode` | - | 前缀图标 |
| clearIcon | `ReactNode` | - | 清除图标 |
| loading | `boolean` | false | 加载状态 |
| showPath | `boolean` | false | 是否显示路径 |
| pathSeparator | `string` | ' / ' | 路径分隔符 |
| changeOnSelect | `boolean` | false | 是否允许选择父节点 |
| fieldNames | `{ value?: string; label?: string; children?: string; disabled?: string; isLeaf?: string }` | - | 字段映射 |
| loadData | `(selectedOptions: CascaderOption[]) => Promise<void>` | - | 加载数据函数 |
| filterOption | `(inputValue: string, option: CascaderOption, path: CascaderOption[]) => boolean` | - | 搜索过滤函数 |
| optionRender | `(option: CascaderOption, index: number) => ReactNode` | - | 自定义选项渲染 |
| dropdownRender | `(menu: ReactNode) => ReactNode` | - | 自定义下拉框渲染 |
| tagRender | `(props: { value: CascaderValue; label: ReactNode; onClose: () => void }) => ReactNode` | - | 自定义标签渲染 |
| displayRender | `(labels: ReactNode[], selectedOptions: CascaderOption[]) => ReactNode` | - | 自定义显示渲染 |
| onChange | `(value: CascaderValue \| null, selectedOptions: CascaderOption[]) => void` | - | 值变化回调 |
| onMultipleChange | `(values: CascaderValue[], selectedOptions: CascaderOption[][]) => void` | - | 多选值变化回调 |
| onSearch | `(value: string) => void` | - | 搜索回调 |
| onFocus | `(event: ITouchEvent) => void` | - | 聚焦回调 |
| onBlur | `(event: ITouchEvent) => void` | - | 失焦回调 |
| onDropdownVisibleChange | `(open: boolean) => void` | - | 展开状态变化回调 |
| onClear | `() => void` | - | 清除回调 |
| onSelect | `(value: CascaderValue, selectedOptions: CascaderOption[]) => void` | - | 选择回调 |
| onDeselect | `(value: CascaderValue, selectedOptions: CascaderOption[]) => void` | - | 取消选择回调 |
| onExpand | `(value: CascaderValue, selectedOptions: CascaderOption[]) => void` | - | 展开回调 |

### CascaderRef

| 方法名 | 类型 | 说明 |
| --- | --- | --- |
| input | `HTMLInputElement \| null` | 输入框元素 |
| getValue | `() => CascaderValue \| null` | 获取当前值 |
| setValue | `(value: CascaderValue \| null) => void` | 设置值 |
| getSelectedOptions | `() => CascaderOption[]` | 获取选中的选项 |
| setOptions | `(options: CascaderOption[]) => void` | 设置选项（已废弃） |
| focus | `() => void` | 聚焦 |
| blur | `() => void` | 失焦 |
| open | `() => void` | 打开下拉框 |
| close | `() => void` | 关闭下拉框 |
| clear | `() => void` | 清除选择 |
| disable | `() => void` | 禁用 |
| enable | `() => void` | 启用 |
| search | `(value: string) => void` | 搜索 |
| expandToPath | `(path: CascaderValue) => void` | 展开到指定路径 |
| reset | `() => void` | 重置 |

### 类型定义

```typescript
// 级联选择器选项类型
export interface CascaderOption {
  value: string | number;
  label: ReactNode;
  children?: CascaderOption[];
  disabled?: boolean;
  isLeaf?: boolean;
  loading?: boolean;
  style?: CSSProperties;
  className?: string;
}

// 级联选择器值类型
export type CascaderValue = (string | number)[];

// 级联选择器尺寸
export type CascaderSize = 'small' | 'medium' | 'large';

// 级联选择器状态
export type CascaderStatus = 'default' | 'error' | 'warning' | 'success';

// 级联选择器变体
export type CascaderVariant = 'outlined' | 'filled' | 'borderless';

// 级联选择器展开方式
export type CascaderExpandTrigger = 'click' | 'hover';

// 级联选择器方向
export type CascaderDirection = 'ltr' | 'rtl';
```

## 使用提示

1. **数据结构**: 确保 options 数据结构正确，包含 value、label 和可选的 children 字段。

2. **受控与非受控**: 根据需求选择受控模式（使用 value 和 onChange）或非受控模式（使用 defaultValue）。

3. **异步加载**: 使用 loadData 函数实现异步加载子选项，注意设置 option.loading 状态。

4. **搜索功能**: 启用 showSearch 后，可以通过 filterOption 自定义搜索逻辑。

5. **性能优化**: 对于大量数据，建议使用分页加载或虚拟滚动。

6. **样式定制**: 通过 size、variant、status 等属性调整组件样式，也可以使用 className 和 style 自定义。

## 浏览器兼容性

| 浏览器 | 版本 |
| --- | --- |
| Chrome | 最新版 |
| Firefox | 最新版 |
| Safari | 最新版 |
| Edge | 最新版 |
| IE | 不支持 |

## 无障碍支持

- 支持键盘导航（Tab、Enter、Arrow keys）
- 支持屏幕阅读器
- 提供无障碍标签和角色

## 相关组件

- [Select 选择器](./Select)
- [TreeSelect 树选择](./TreeSelect)
- [Picker 选择器](./Picker)