import { ResponsiveGrid, ResponsiveGridItem, ResponsiveGridPresets } from '@taro-uno/ui';
import ResponsiveGridExample from './examples/index';

<Meta title="通用组件 / ResponsiveGrid 响应式栅格" description="提供多平台适配的响应式栅格布局系统" />

<Description>
  ResponsiveGrid 是一个响应式栅格组件，提供了多平台适配的响应式布局系统，能够根据不同屏幕尺寸自动调整列数、间距等布局参数。
</Description>

<CodeExample title="基本用法">
  <ResponsiveGridExample />
  <ExampleCode>
  ```tsx
  import React from 'react';
  import { ResponsiveGrid, ResponsiveGridItem } from '@taro-uno/ui';
  import { View, Text } from '@tarojs/components';
  
  export default function ResponsiveGridExample() {
    return (
      <ResponsiveGrid columns={{ xs: 1, sm: 2, md: 3, lg: 4 }} gap="16px">
        <ResponsiveGridItem>
          <View className="grid-item">
            <Text>项目 1</Text>
          </View>
        </ResponsiveGridItem>
        <ResponsiveGridItem>
          <View className="grid-item">
            <Text>项目 2</Text>
          </View>
        </ResponsiveGridItem>
        <ResponsiveGridItem>
          <View className="grid-item">
            <Text>项目 3</Text>
          </View>
        </ResponsiveGridItem>
        <ResponsiveGridItem>
          <View className="grid-item">
            <Text>项目 4</Text>
          </View>
        </ResponsiveGridItem>
      </ResponsiveGrid>
    );
  }
  ```
  </ExampleCode>
</CodeExample>

## 功能介绍

ResponsiveGrid 组件提供了以下核心功能：

### 响应式布局
- 支持根据屏幕尺寸自动调整列数
- 支持响应式设置间距、行间距、列间距
- 适配多端平台（Web、小程序等）

### 灵活配置
- 可自定义列数、间距等参数
- 支持对齐方式和主轴对齐设置
- 支持换行控制

### 预设布局
- 提供多种预设布局（两列、三列、四列、卡片、列表、仪表板）
- 简化常用布局的使用

### 栅格项功能
- 支持设置占据列数
- 支持设置偏移量
- 支持排序
- 支持单独对齐方式

## API

### ResponsiveGridProps

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| children | ReactNode | - | 栅格容器的子元素，通常是 ResponsiveGridItem 组件 |
| className | string | - | 自定义类名 |
| columns | ResponsiveValue<number> | { xs: 1, sm: 2, md: 3, lg: 4, xl: 5 } | 列数，支持响应式设置 |
| gap | ResponsiveValue<string \| number> | { xs: '8px', sm: '16px' } | 间距，支持响应式设置 |
| rowGap | ResponsiveValue<string \| number> | - | 行间距，支持响应式设置，优先级高于 gap |
| columnGap | ResponsiveValue<string \| number> | - | 列间距，支持响应式设置，优先级高于 gap |
| align | 'start' \| 'center' \| 'end' \| 'stretch' | 'stretch' | 对齐方式 |
| justify | 'start' \| 'center' \| 'end' \| 'between' \| 'around' \| 'evenly' | 'start' | 主轴对齐方式 |
| wrap | boolean | true | 是否换行 |

### ResponsiveGridItemProps

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| children | ReactNode | - | 栅格项的内容 |
| className | string | - | 自定义类名 |
| span | ResponsiveValue<number> | { xs: 1 } | 占据列数，支持响应式设置 |
| offset | ResponsiveValue<number> | 0 | 偏移列数，支持响应式设置 |
| order | ResponsiveValue<number> | - | 排序，支持响应式设置 |
| align | 'start' \| 'center' \| 'end' \| 'stretch' | 'stretch' | 对齐方式 |

### ResponsiveGridPresets

| 预设 | 说明 |
| --- | --- |
| TwoColumns | 两列布局（移动端1列，小屏幕及以上2列） |
| ThreeColumns | 三列布局（移动端1列，小屏幕2列，中屏幕及以上3列） |
| FourColumns | 四列布局（移动端1列，小屏幕2列，中屏幕3列，大屏幕及以上4列） |
| CardLayout | 卡片布局（响应式列数和间距） |
| ListLayout | 列表布局（单列，响应式间距） |
| DashboardLayout | 仪表板布局（移动端1列，小屏幕2列，中屏幕及以上4列） |

## 使用示例

### 基本用法

```tsx
<ResponsiveGrid columns={{ xs: 1, sm: 2, md: 3 }} gap="16px">
  <ResponsiveGridItem>
    <View className="grid-item">项目 1</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">项目 2</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">项目 3</View>
  </ResponsiveGridItem>
</ResponsiveGrid>
```

### 自定义对齐方式

```tsx
<ResponsiveGrid 
  columns={{ xs: 2 }} 
  gap="16px" 
  align="center" 
  justify="between"
>
  <ResponsiveGridItem>
    <View className="grid-item" style={{ height: '80px' }}>项目 1</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item" style={{ height: '120px' }}>项目 2</View>
  </ResponsiveGridItem>
</ResponsiveGrid>
```

### 栅格项占据多列

```tsx
<ResponsiveGrid columns={{ xs: 2, md: 4 }} gap="16px">
  <ResponsiveGridItem span={{ xs: 2, md: 2 }}>
    <View className="grid-item">占据2列</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">项目 2</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">项目 3</View>
  </ResponsiveGridItem>
</ResponsiveGrid>
```

### 栅格项偏移

```tsx
<ResponsiveGrid columns={{ xs: 2 }} gap="16px">
  <ResponsiveGridItem>
    <View className="grid-item">项目 1</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem offset={{ xs: 1 }}>
    <View className="grid-item">偏移1列</View>
  </ResponsiveGridItem>
</ResponsiveGrid>
```

### 使用预设布局

```tsx
// 使用卡片布局
<ResponsiveGridPresets.CardLayout>
  <ResponsiveGridItem>
    <View className="grid-item">卡片 1</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">卡片 2</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">卡片 3</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">卡片 4</View>
  </ResponsiveGridItem>
</ResponsiveGridPresets.CardLayout>

// 使用仪表板布局
<ResponsiveGridPresets.DashboardLayout>
  <ResponsiveGridItem>
    <View className="grid-item">仪表盘项目 1</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">仪表盘项目 2</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">仪表盘项目 3</View>
  </ResponsiveGridItem>
  <ResponsiveGridItem>
    <View className="grid-item">仪表盘项目 4</View>
  </ResponsiveGridItem>
</ResponsiveGridPresets.DashboardLayout>
```

## 使用提示

1. **响应式设计**：利用响应式值设置不同屏幕尺寸下的列数和间距，实现良好的多端适配。

2. **性能优化**：避免在栅格容器中放置过多的子元素，合理使用分页或虚拟滚动处理大量数据。

3. **布局嵌套**：可以嵌套使用 ResponsiveGrid 组件，实现更复杂的布局结构。

4. **预设布局**：优先使用预设布局可以简化代码，提高开发效率。

5. **对齐方式**：根据内容需求选择合适的对齐方式，确保视觉一致性。

6. **间距控制**：使用 gap、rowGap 和 columnGap 精确控制栅格间距，创造舒适的视觉体验。

## 浏览器兼容性

| 浏览器 | 版本 | 支持情况 |
| --- | --- | --- |
| Chrome | 80+ | ✅ |
| Firefox | 75+ | ✅ |
| Safari | 13+ | ✅ |
| Edge | 80+ | ✅ |
| 微信小程序 | 基础库 2.10+ | ✅ |
| 支付宝小程序 | 基础库 2.7+ | ✅ |

## 无障碍支持

- 支持屏幕阅读器
- 提供语义化的 HTML 结构
- 支持键盘导航