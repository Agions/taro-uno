---
title: Modal 模态框
description: 模态对话框，在当前页面显示一个浮层，用于展示重要信息或获取用户交互。
category: feedback
zh-CN: { preview: '/screenshots/modal.png' }
en-US: { preview: '/screenshots/modal.png' }
---

## 功能介绍

Modal 组件是一个模态对话框，在当前页面显示一个浮层，用于展示重要信息或获取用户交互。它支持以下功能：

- 支持受控/非受控模式
- 可配置标题、内容和按钮
- 支持不同尺寸和位置
- 支持动画效果
- 支持遮罩和点击遮罩关闭
- 支持键盘 ESC 关闭
- 提供 Ref 方法控制模态框
- 提供静态方法（confirm, info, success, error, warning）

## 基本用法

```tsx
import React, { useState } from 'react';
import { View, Text } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const BasicModal = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开模态框</Button>
      <Modal
        visible={visible}
        title="提示"
        content="这是一个模态框"
        buttons={[
          { text: '取消', onClick: () => setVisible(false) },
          { text: '确定', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default BasicModal;
```

## 使用示例

### 基础模态框

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const BasicExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开模态框</Button>
      <Modal
        visible={visible}
        title="基础模态框"
        content="这是一个基础的模态框示例"
        buttons={[
          { text: '取消', onClick: () => setVisible(false) },
          { text: '确定', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default BasicExample;
```

### 无标题模态框

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const NoTitleExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开无标题模态框</Button>
      <Modal
        visible={visible}
        content="这是一个没有标题的模态框"
        buttons={[
          { text: '知道了', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default NoTitleExample;
```

### 自定义按钮

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const CustomButtonsExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开自定义按钮模态框</Button>
      <Modal
        visible={visible}
        title="自定义按钮"
        content="这是一个带有自定义按钮的模态框"
        buttons={[
          { text: '取消', onClick: () => setVisible(false) },
          { text: '删除', type: 'danger', onClick: () => setVisible(false) },
          { text: '保存', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default CustomButtonsExample;
```

### 禁用遮罩点击关闭

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const NoMaskCloseExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开模态框</Button>
      <Modal
        visible={visible}
        title="禁用遮罩点击关闭"
        content="点击遮罩不会关闭模态框"
        maskClosable={false}
        buttons={[
          { text: '确定', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default NoMaskCloseExample;
```

### 自定义尺寸和位置

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const CustomSizePositionExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开自定义尺寸模态框</Button>
      <Modal
        visible={visible}
        title="自定义尺寸和位置"
        content="这是一个自定义尺寸和位置的模态框"
        size="large"
        width={600}
        position="top"
        buttons={[
          { text: '确定', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default CustomSizePositionExample;
```

### 全屏模态框

```tsx
import React, { useState } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const FullscreenExample = () => {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button onClick={() => setVisible(true)}>打开全屏模态框</Button>
      <Modal
        visible={visible}
        title="全屏模态框"
        content="这是一个全屏的模态框"
        fullscreen
        buttons={[
          { text: '关闭', type: 'primary', onClick: () => setVisible(false) },
        ]}
      />
    </View>
  );
};

export default FullscreenExample;
```

### 通过 Ref 控制

```tsx
import React, { useRef } from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const RefExample = () => {
  const modalRef = useRef(null);

  return (
    <View>
      <Button onClick={() => modalRef.current.show()}>打开模态框</Button>
      <Button onClick={() => modalRef.current.hide()}>关闭模态框</Button>
      <Button onClick={() => modalRef.current.toggle()}>切换模态框</Button>
      <Modal
        ref={modalRef}
        title="通过 Ref 控制"
        content="这是一个通过 Ref 控制的模态框"
        buttons={[
          { text: '确定', type: 'primary', onClick: () => modalRef.current.hide() },
        ]}
      />
    </View>
  );
};

export default RefExample;
```

### 静态方法

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Modal, Button } from '@taro-uno/ui';

const StaticMethodsExample = () => {
  return (
    <View>
      <Button onClick={() => Modal.confirm({ title: '确认', content: '确定要执行此操作吗？' })}>
        确认框
      </Button>
      <Button onClick={() => Modal.info({ title: '信息', content: '这是一条信息' })}>
        信息框
      </Button>
      <Button onClick={() => Modal.success({ title: '成功', content: '操作成功' })}>
        成功框
      </Button>
      <Button onClick={() => Modal.error({ title: '错误', content: '操作失败' })}>
        错误框
      </Button>
      <Button onClick={() => Modal.warning({ title: '警告', content: '警告信息' })}>
        警告框
      </Button>
    </View>
  );
};

export default StaticMethodsExample;
```

## API

### ModalProps

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| visible | `boolean` | - | 是否显示 |
| defaultVisible | `boolean` | `false` | 默认是否显示 |
| title | `ReactNode` | - | 标题 |
| content | `ReactNode` | - | 内容 |
| buttons | `ModalButton[]` | `[]` | 按钮列表 |
| closable | `boolean` | `true` | 是否显示关闭按钮 |
| mask | `boolean` | `true` | 是否显示遮罩 |
| maskClosable | `boolean` | `true` | 点击遮罩是否关闭 |
| keyboard | `boolean` | `true` | 是否支持键盘 ESC 关闭 |
| centered | `boolean` | `true` | 是否居中 |
| size | `ModalSize` | `'default'` | 尺寸 |
| position | `ModalPosition` | `'center'` | 位置 |
| width | `number \| string` | - | 宽度 |
| height | `number \| string` | - | 高度 |
| fullscreen | `boolean` | `false` | 是否全屏 |
| animated | `boolean` | `true` | 是否动画效果 |
| animationDuration | `number` | `300` | 动画持续时间 |
| destroyOnClose | `boolean` | `false` | 关闭时是否销毁 |
| forceRender | `boolean` | `false` | 强制渲染 |
| getContainer | `() => HTMLElement` | - | 获取容器 |
| onMaskClick | `(event: React.MouseEvent) => void` | - | 点击遮罩事件 |
| onShow | `() => void` | - | 显示事件 |
| onHide | `() => void` | - | 隐藏事件 |
| onOk | `() => void \| Promise<void>` | - | 确定事件 |
| onCancel | `() => void` | - | 取消事件 |
| onButtonClick | `(button: ModalButton) => void` | - | 按钮点击事件 |
| onClose | `() => void` | - | 关闭事件 |
| className | `string` | - | 类名 |
| style | `object` | - | 样式 |

### ModalButton

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| text | `string` | - | 按钮文本 |
| type | `ModalButtonType` | `'default'` | 按钮类型 |
| key | `string` | - | 按钮键值 |
| disabled | `boolean` | `false` | 是否禁用 |
| loading | `boolean` | `false` | 是否加载中 |
| onClick | `() => void \| Promise<void>` | - | 点击事件 |

### ModalRef

| 方法 | 类型 | 说明 |
| --- | --- | --- |
| show | `() => void` | 显示Modal |
| hide | `() => void` | 隐藏Modal |
| toggle | `() => void` | 切换显示状态 |
| isVisible | `() => boolean` | 获取显示状态 |
| setTitle | `(title: ReactNode) => void` | 设置标题 |
| setContent | `(content: ReactNode) => void` | 设置内容 |
| setButtons | `(buttons: ModalButton[]) => void` | 设置按钮 |
| addButton | `(button: ModalButton) => void` | 添加按钮 |
| removeButton | `(key: string) => void` | 移除按钮 |
| focus | `() => void` | 聚焦 |

### 类型定义

```ts
type ModalSize = 'xs' | 'sm' | 'default' | 'lg' | 'xl' | 'small' | 'medium' | 'large' | 'fullscreen';
type ModalPosition = 'center' | 'top' | 'bottom' | 'left' | 'right';
type ModalButtonType = 'default' | 'primary' | 'danger' | 'text';
```

## 使用提示

1. **受控与非受控模式**：Modal 组件同时支持受控模式（通过 `visible` 属性控制）和非受控模式（通过 `defaultVisible` 和 Ref 方法控制）。

2. **按钮配置**：通过 `buttons` 属性可以配置多个按钮，支持不同类型（default, primary, danger, text）和状态（disabled, loading）。

3. **尺寸和位置**：支持多种尺寸和位置配置，可以通过 `size`, `width`, `height` 和 `position` 属性自定义。

4. **交互行为**：可以通过 `maskClosable` 和 `keyboard` 属性控制点击遮罩和键盘 ESC 是否关闭模态框。

5. **性能优化**：可以通过 `destroyOnClose` 属性在关闭时销毁组件，减少不必要的渲染。

## 浏览器兼容性

| 浏览器 | 版本 |
| --- | --- |
| Chrome | ✅ |
| Firefox | ✅ |
| Safari | ✅ |
| Edge | ✅ |
| Taro 小程序 | ✅ |

## 无障碍支持

- 支持键盘操作，包括 ESC 关闭和 Tab 键导航
- 提供适当的 ARIA 属性
- 支持屏幕阅读器