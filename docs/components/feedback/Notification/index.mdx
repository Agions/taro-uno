---
title: Notification 通知
description: 全局通知提示，用于系统提醒、操作反馈等场景。
category: feedback
zh-CN: { preview: '/screenshots/notification.png' }
en-US: { preview: '/screenshots/notification.png' }
---

## 功能介绍

Notification 组件是一个全局通知提示，用于系统提醒、操作反馈等场景。它支持以下功能：

- 支持四种通知类型：成功、错误、警告、信息
- 支持多种显示位置：右上角、左上角、右下角、左下角、顶部、底部
- 支持自动关闭，可配置关闭时间
- 支持自定义图标和内容
- 支持悬停暂停自动关闭
- 支持点击和关闭事件
- 支持多种动画效果
- 提供丰富的 Ref 方法控制通知

## 基本用法

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const BasicNotification = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'success',
          title: '成功',
          content: '操作成功完成',
        });
      }}>
        显示成功通知
      </Button>
    </View>
  );
};

export default BasicNotification;
```

## 使用示例

### 不同类型的通知

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const DifferentTypesExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.success({
          title: '成功',
          content: '操作成功完成',
        });
      }}>
        成功通知
      </Button>
      <Button onClick={() => {
        Notification.error({
          title: '错误',
          content: '操作失败，请重试',
        });
      }}>
        错误通知
      </Button>
      <Button onClick={() => {
        Notification.warning({
          title: '警告',
          content: '请注意操作风险',
        });
      }}>
        警告通知
      </Button>
      <Button onClick={() => {
        Notification.info({
          title: '信息',
          content: '这是一条提示信息',
        });
      }}>
        信息通知
      </Button>
    </View>
  );
};

export default DifferentTypesExample;
```

### 自定义位置

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const CustomPlacementExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '右上角',
          content: '这是右上角的通知',
          placement: 'topRight',
        });
      }}>
        右上角
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '左上角',
          content: '这是左上角的通知',
          placement: 'topLeft',
        });
      }}>
        左上角
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '右下角',
          content: '这是右下角的通知',
          placement: 'bottomRight',
        });
      }}>
        右下角
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '左下角',
          content: '这是左下角的通知',
          placement: 'bottomLeft',
        });
      }}>
        左下角
      </Button>
    </View>
  );
};

export default CustomPlacementExample;
```

### 自定义时长

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const CustomDurationExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '短时间显示',
          content: '此通知将在2秒后关闭',
          duration: 2000,
        });
      }}>
        2秒关闭
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '长时间显示',
          content: '此通知将在10秒后关闭',
          duration: 10000,
        });
      }}>
        10秒关闭
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '不自动关闭',
          content: '此通知需要手动关闭',
          duration: 0,
        });
      }}>
        不自动关闭
      </Button>
    </View>
  );
};

export default CustomDurationExample;
```

### 自定义内容和图标

```tsx
import React from 'react';
import { View, Text } from '@tarojs/components';
import { Notification, Button, Icon } from '@taro-uno/ui';

const CustomContentExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'success',
          title: '自定义图标',
          content: '使用自定义图标显示通知',
          icon: <Icon type="check-circle" size="24" color="#52c41a" />,
        });
      }}>
        自定义图标
      </Button>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          content: '没有标题的通知内容',
        });
      }}>
        无标题通知
      </Button>
    </View>
  );
};

export default CustomContentExample;
```

### 禁用自动关闭

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const DisableAutoCloseExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'warning',
          title: '禁用自动关闭',
          content: '此通知需要手动点击关闭按钮',
          autoClose: false,
        });
      }}>
        禁用自动关闭
      </Button>
    </View>
  );
};

export default DisableAutoCloseExample;
```

### 事件处理

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const EventHandlingExample = () => {
  const handleNotificationClick = () => {
    console.log('通知被点击了');
  };

  const handleNotificationClose = () => {
    console.log('通知被关闭了');
  };

  return (
    <View>
      <Button onClick={() => {
        Notification.open({
          type: 'info',
          title: '事件处理',
          content: '点击通知查看控制台输出',
          onClick: handleNotificationClick,
          onClose: handleNotificationClose,
        });
      }}>
        事件处理
      </Button>
    </View>
  );
};

export default EventHandlingExample;
```

### 批量管理通知

```tsx
import React from 'react';
import { View } from '@tarojs/components';
import { Notification, Button } from '@taro-uno/ui';

const BatchManagementExample = () => {
  return (
    <View>
      <Button onClick={() => {
        Notification.success({ title: '通知1', content: '第一条通知' });
        Notification.success({ title: '通知2', content: '第二条通知' });
        Notification.success({ title: '通知3', content: '第三条通知' });
      }}>
        批量显示通知
      </Button>
      <Button onClick={() => {
        Notification.destroyAll();
      }}>
        关闭所有通知
      </Button>
    </View>
  );
};

export default BatchManagementExample;
```

### 通过 Ref 控制通知

```tsx
import React, { useRef } from 'react';
import { View } from '@tarojs/components';
import { Notification as NotificationComponent, Button } from '@taro-uno/ui';

const RefControlExample = () => {
  const notificationRef = useRef(null);

  return (
    <View>
      <Button onClick={() => notificationRef.current?.show()}>
        显示通知
      </Button>
      <Button onClick={() => notificationRef.current?.hide()}>
        隐藏通知
      </Button>
      <Button onClick={() => notificationRef.current?.pauseProgress?.()}>
        暂停自动关闭
      </Button>
      <Button onClick={() => notificationRef.current?.resumeProgress?.()}>
        恢复自动关闭
      </Button>
      <NotificationComponent
        ref={notificationRef}
        type="info"
        title="Ref 控制"
        content="通过 Ref 控制通知的显示和隐藏"
        duration={10000}
      />
    </View>
  );
};

export default RefControlExample;
```

## API

### NotificationProps

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| type | `NotificationType` | `'info'` | 通知类型 |
| title | `ReactNode` | - | 通知标题 |
| content | `ReactNode` | - | 通知内容 |
| icon | `ReactNode` | - | 自定义图标 |
| closable | `boolean` | `true` | 是否可关闭 |
| duration | `number` | `4500` | 显示时长（毫秒） |
| placement | `NotificationPlacement` | `'topRight'` | 通知位置 |
| className | `string` | - | 自定义类名 |
| style | `React.CSSProperties` | - | 自定义样式 |
| onClose | `() => void` | - | 关闭回调 |
| onClick | `(event?: ITouchEvent) => void` | - | 点击回调 |
| showClose | `boolean` | `true` | 是否显示关闭按钮 |
| showIcon | `boolean` | `true` | 是否显示图标 |
| animation | `NotificationAnimation` | `'fade'` | 动画类型 |
| autoClose | `boolean` | `true` | 是否自动关闭 |
| draggable | `boolean` | `false` | 是否可拖拽 |
| dragThreshold | `number` | `100` | 拖拽阈值 |
| stackIndex | `number` | - | 堆叠索引 |
| hovered | `boolean` | `false` | 悬停状态 |
| isClosing | `boolean` | `false` | 是否正在关闭 |

### NotificationRef

| 方法 | 类型 | 说明 |
| --- | --- | --- |
| show | `() => boolean` | 显示通知 |
| hide | `() => boolean` | 隐藏通知 |
| update | `(props: Partial<NotificationProps>) => boolean` | 更新通知内容 |
| pauseProgress | `() => void` | 暂停自动关闭 |
| resumeProgress | `() => void` | 恢复自动关闭 |
| getState | `() => { visible: boolean; paused: boolean; closing: boolean; }` | 获取通知状态 |

### 静态方法

| 方法 | 类型 | 说明 |
| --- | --- | --- |
| open | `(config: Omit<NotificationItem, 'key' | 'createdAt'>) => string` | 显示通知 |
| success | `(config: Omit<NotificationItem, 'key' | 'createdAt' | 'type'>) => string` | 显示成功通知 |
| error | `(config: Omit<NotificationItem, 'key' | 'createdAt' | 'type'>) => string` | 显示错误通知 |
| warning | `(config: Omit<NotificationItem, 'key' | 'createdAt' | 'type'>) => string` | 显示警告通知 |
| info | `(config: Omit<NotificationItem, 'key' | 'createdAt' | 'type'>) => string` | 显示信息通知 |
| close | `(key: string) => void` | 关闭指定通知 |
| destroyAll | `() => void` | 关闭所有通知 |
| update | `(key: string, config: Partial<NotificationItem>) => void` | 更新通知 |
| getNotifications | `() => NotificationItem[]` | 获取所有通知 |
| getCount | `() => number` | 获取通知数量 |
| setMaxCount | `(count: number) => void` | 设置最大数量 |
| setDefaultPlacement | `(placement: NotificationPlacement) => void` | 设置默认位置 |
| setDefaultDuration | `(duration: number) => void` | 设置默认时长 |
| pauseAll | `() => void` | 暂停所有通知自动关闭 |
| resumeAll | `() => void` | 恢复所有通知自动关闭 |
| clearHistory | `() => void` | 清空历史记录 |
| getHistory | `() => NotificationItem[]` | 获取通知历史 |

### 类型定义

```ts
type NotificationType = 'success' | 'error' | 'warning' | 'info';
type NotificationPlacement = 'topRight' | 'topLeft' | 'bottomRight' | 'bottomLeft' | 'top' | 'bottom';
type NotificationAnimation = 'fade' | 'slide' | 'scale' | 'bounce' | 'none';
```

## 使用提示

1. **通知类型选择**：根据不同的场景选择合适的通知类型，如成功操作使用 `success`，错误操作使用 `error` 等。

2. **显示位置**：根据页面布局和用户体验，选择合适的通知显示位置，默认是右上角。

3. **自动关闭时长**：根据通知的重要程度设置合适的自动关闭时长，重要信息可以设置较长时间或不自动关闭。

4. **事件处理**：可以通过 `onClick` 和 `onClose` 事件处理通知的点击和关闭操作。

5. **批量管理**：使用静态方法可以方便地管理多个通知，如批量显示、批量关闭等。

6. **性能优化**：当需要显示大量通知时，可以通过 `setMaxCount` 设置最大通知数量，避免页面拥挤。

## 浏览器兼容性

| 浏览器 | 版本 |
| --- | --- |
| Chrome | ✅ |
| Firefox | ✅ |
| Safari | ✅ |
| Edge | ✅ |
| Taro 小程序 | ✅ |

## 无障碍支持

- 支持键盘操作，包括 ESC 关闭
- 提供适当的 ARIA 属性
- 支持屏幕阅读器