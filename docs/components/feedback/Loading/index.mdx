---
title: Loading 加载
---

Loading 组件用于显示加载状态，提供多种加载动画类型和尺寸选择。

## 功能介绍

- 支持四种加载动画类型：spinner（默认）、dots、pulse、bars
- 提供五种尺寸选择：xs、sm、default、lg、xl
- 支持自定义颜色
- 支持显示文本提示
- 支持延迟显示，避免闪烁
- 支持通过 ref 控制显示/隐藏

## 基本用法

```tsx
import { Loading } from '@taro-uno/components';

// 默认加载动画
<Loading />

// 带文本提示
<Loading text="加载中..." />

// 使用 ref 控制
const loadingRef = useRef<LoadingRef>(null);

// 显示加载
loadingRef.current?.show();

// 隐藏加载
loadingRef.current?.hide();

<Loading ref={loadingRef} text="加载中..." />
```

## 使用示例

### 不同类型

```tsx
import { Loading } from '@taro-uno/components';

function LoadingTypes() {
  return (
    <View style={{ display: 'flex', gap: 20 }}>
      <Loading type="spinner" text="spinner" />
      <Loading type="dots" text="dots" />
      <Loading type="pulse" text="pulse" />
      <Loading type="bars" text="bars" />
    </View>
  );
}
```

### 不同尺寸

```tsx
import { Loading } from '@taro-uno/components';

function LoadingSizes() {
  return (
    <View style={{ display: 'flex', gap: 20, alignItems: 'center' }}>
      <Loading size="xs" text="xs" />
      <Loading size="sm" text="sm" />
      <Loading size="default" text="default" />
      <Loading size="lg" text="lg" />
      <Loading size="xl" text="xl" />
    </View>
  );
}
```

### 自定义颜色

```tsx
import { Loading } from '@taro-uno/components';

function LoadingColors() {
  return (
    <View style={{ display: 'flex', gap: 20 }}>
      <Loading color="#1890ff" text="蓝色" />
      <Loading color="#52c41a" text="绿色" />
      <Loading color="#faad14" text="黄色" />
      <Loading color="#f5222d" text="红色" />
    </View>
  );
}
```

### 带文本提示

```tsx
import { Loading } from '@taro-uno/components';

function LoadingWithText() {
  return (
    <View>
      <Loading text="加载中..." />
      <Loading type="dots" text="数据加载中" />
      <Loading type="pulse" text="请稍候" />
    </View>
  );
}
```

### 延迟显示

```tsx
import { Loading } from '@taro-uno/components';

function LoadingWithDelay() {
  // 延迟 500ms 显示，避免快速加载时的闪烁
  return <Loading delay={500} text="延迟显示" />;
}
```

### 全屏加载

```tsx
import { Loading, View } from '@taro-uno/components';

function FullScreenLoading() {
  return (
    <View style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, display: 'flex', justifyContent: 'center', alignItems: 'center', backgroundColor: 'rgba(0, 0, 0, 0.5)' }}>
      <Loading size="lg" text="全屏加载" />
    </View>
  );
}
```

### 内联加载

```tsx
import { Loading, Button } from '@taro-uno/components';

function InlineLoading() {
  const [loading, setLoading] = useState(false);

  const handleClick = () => {
    setLoading(true);
    setTimeout(() => {
      setLoading(false);
    }, 2000);
  };

  return (
    <Button onClick={handleClick}>
      {loading ? <Loading size="sm" /> : '点击加载'}
    </Button>
  );
}
```

### 通过 Ref 控制

```tsx
import { Loading, Button, View } from '@taro-uno/components';
import { useRef } from 'react';

function LoadingWithRef() {
  const loadingRef = useRef<LoadingRef>(null);

  return (
    <View>
      <Button onClick={() => loadingRef.current?.show()}>显示加载</Button>
      <Button onClick={() => loadingRef.current?.hide()}>隐藏加载</Button>
      <Loading ref={loadingRef} text="通过 Ref 控制" />
    </View>
  );
}
```

## API

### LoadingProps

| 参数 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| type | `'spinner' \| 'dots' \| 'pulse' \| 'bars'` | `'spinner'` | 加载动画类型 |
| size | `'xs' \| 'sm' \| 'default' \| 'lg' \| 'xl'` | `'default'` | 加载动画尺寸 |
| color | `string` | - | 加载动画颜色 |
| text | `string` | - | 加载文本提示 |
| delay | `number` | `0` | 延迟显示时间（毫秒） |
| className | `string` | - | 自定义类名 |
| style | `React.CSSProperties` | - | 自定义样式 |

### LoadingRef

| 方法名 | 类型 | 说明 |
| --- | --- | --- |
| getElement | `() => HTMLElement \| null` | 获取加载组件的 DOM 元素 |
| show | `() => void` | 显示加载组件 |
| hide | `() => void` | 隐藏加载组件 |

## 使用提示

1. **延迟显示**：对于可能快速完成的操作，建议设置 `delay` 属性（如 300-500ms），避免加载动画闪烁，提升用户体验。

2. **类型选择**：
   - `spinner`：适用于大多数场景，旋转加载效果
   - `dots`：轻量级加载效果，适合列表或卡片加载
   - `pulse`：简洁的脉冲效果，适合按钮等小区域
   - `bars`：多条形动画，适合数据加载场景

3. **尺寸选择**：
   - `xs`/`sm`：适合按钮、表格单元格等小空间
   - `default`：通用尺寸，适合大多数场景
   - `lg`/`xl`：适合全屏加载、页面级加载等大空间

4. **全屏加载**：结合定位样式可以实现全屏加载效果，覆盖整个页面或指定区域。

5. **性能优化**：避免在短时间内频繁创建和销毁 Loading 组件，建议使用 ref 控制显示/隐藏。

## 浏览器兼容性

| 浏览器 | 版本 |
| --- | --- |
| Chrome | 支持 |
| Firefox | 支持 |
| Safari | 支持 |
| Taro 小程序 | 支持 |
| Taro H5 | 支持 |

## 无障碍支持

- 加载状态会自动设置 `aria-busy` 属性
- 文本提示支持屏幕阅读器
- 支持键盘导航（通过 ref 控制）