# Toast 轻提示

轻量级的消息提示组件，用于向用户快速反馈操作结果或提示信息。

## 功能特性

- ✅ 支持多种类型提示（成功、失败、警告、信息、加载中）
- ✅ 可配置显示位置（顶部、中部、底部）
- ✅ 自动关闭功能，可自定义持续时间
- ✅ 支持显示/隐藏图标
- ✅ 提供静态方法调用，方便快捷使用
- ✅ 支持通过Ref控制组件
- ✅ 支持自定义样式和图标

## 基本用法

### 静态方法调用（推荐）

```tsx
import { Toast } from '@taro-uno/ui';

// 显示默认提示
Toast.show('这是一条提示信息');

// 显示成功提示
Toast.success('操作成功');

// 显示错误提示
Toast.error('操作失败');

// 显示警告提示
Toast.warning('警告信息');

// 显示信息提示
Toast.info('普通信息');

// 显示加载提示（不会自动关闭）
Toast.loading('加载中...');

// 手动关闭提示
setTimeout(() => {
  Toast.hide();
}, 2000);
```

### 组件式使用

```tsx
import { Toast } from '@taro-uno/ui';
import { useState } from 'react';
import { Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastDemo() {
  const [visible, setVisible] = useState(false);

  return (
    <View>
      <Button type="primary" onClick={() => setVisible(true)}>
        显示提示
      </Button>
      <Toast
        visible={visible}
        message="这是一条提示信息"
        type="success"
        onClose={() => setVisible(false)}
      />
    </View>
  );
}
```

## 使用示例

### 1. 不同类型的Toast

```tsx
import { Toast, Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastTypes() {
  return (
    <View className="toast-types-container">
      <Button type="primary" onClick={() => Toast.success('操作成功')} style={{ marginBottom: 12 }}>
        成功提示
      </Button>
      <Button type="danger" onClick={() => Toast.error('操作失败')} style={{ marginBottom: 12 }}>
        错误提示
      </Button>
      <Button type="warning" onClick={() => Toast.warning('警告信息')} style={{ marginBottom: 12 }}>
        警告提示
      </Button>
      <Button type="default" onClick={() => Toast.info('普通信息')} style={{ marginBottom: 12 }}>
        信息提示
      </Button>
      <Button type="default" onClick={() => Toast.loading('加载中...')}>
        加载提示
      </Button>
    </View>
  );
}
```

### 2. 不同位置的Toast

```tsx
import { Toast, Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastPositions() {
  const showToast = (position) => {
    Toast.show({
      message: `这是${position}位置的提示`,
      position,
    });
  };

  return (
    <View className="toast-positions-container">
      <Button type="primary" onClick={() => showToast('top')} style={{ marginBottom: 12 }}>
        顶部提示
      </Button>
      <Button type="primary" onClick={() => showToast('center')} style={{ marginBottom: 12 }}>
        中部提示
      </Button>
      <Button type="primary" onClick={() => showToast('bottom')}>
        底部提示
      </Button>
    </View>
  );
}
```

### 3. 自定义持续时间

```tsx
import { Toast, Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastDuration() {
  return (
    <View className="toast-duration-container">
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '1秒后自动关闭',
          duration: 1000,
        });
      }} style={{ marginBottom: 12 }}>
        短时间提示
      </Button>
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '5秒后自动关闭',
          duration: 5000,
        });
      }}>
        长时间提示
      </Button>
    </View>
  );
}
```

### 4. 不显示图标

```tsx
import { Toast, Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastNoIcon() {
  return (
    <View className="toast-no-icon-container">
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '不显示图标的提示信息',
          showIcon: false,
        });
      }}>
        不显示图标
      </Button>
    </View>
  );
}
```

### 5. 可关闭的Toast

```tsx
import { Toast } from '@taro-uno/ui';
import { View } from '@tarojs/components';
import { Button } from '@taro-uno/ui';

function ToastClosable() {
  return (
    <View className="toast-closable-container">
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '点击右上角关闭按钮可关闭提示',
          closable: true,
          duration: 0, // 0表示不自动关闭
        });
      }}>
        可关闭提示
      </Button>
    </View>
  );
}
```

### 6. 通过Ref控制

```tsx
import { Toast } from '@taro-uno/ui';
import { View } from '@tarojs/components';
import { Button } from '@taro-uno/ui';
import { useRef } from 'react';

function ToastRefDemo() {
  const toastRef = useRef(null);

  return (
    <View className="toast-ref-container">
      <Toast
        ref={toastRef}
        message="通过Ref控制的提示"
        type="warning"
        defaultVisible={false}
      />
      <Button type="primary" onClick={() => toastRef.current?.show()} style={{ marginRight: 12 }}>
        显示
      </Button>
      <Button type="default" onClick={() => toastRef.current?.hide()}>
        隐藏
      </Button>
    </View>
  );
}
```

### 7. 配置回调函数

```tsx
import { Toast, Button } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastCallbacks() {
  return (
    <View className="toast-callbacks-container">
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '操作成功',
          type: 'success',
          onClose: () => {
            console.log('Toast已关闭');
          },
          onClick: () => {
            console.log('Toast被点击');
          },
        });
      }}>
        带回调的提示
      </Button>
    </View>
  );
}
```

### 8. 复杂配置示例

```tsx
import { Toast, Button, Icon } from '@taro-uno/ui';
import { View } from '@tarojs/components';

function ToastComplex() {
  return (
    <View className="toast-complex-container">
      <Button type="primary" onClick={() => {
        Toast.show({
          message: '自定义配置的提示',
          type: 'success',
          position: 'center',
          duration: 3000,
          closable: true,
          showIcon: true,
          // 使用自定义图标
          // icon: <Icon name="check-circle" size="20" color="white" />,
        });
      }}>
        复杂配置
      </Button>
    </View>
  );
}
```

## API

### ToastProps

| 参数 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| visible | `boolean` | - | 是否显示（受控模式） |
| defaultVisible | `boolean` | `false` | 默认是否显示（非受控模式） |
| message | `ReactNode` | - | 消息内容 |
| type | `ToastType` | `'info'` | 提示类型 |
| position | `ToastPosition` | `'top'` | 显示位置 |
| duration | `number` | `3000` | 持续时间（毫秒），0表示不自动关闭 |
| closable | `boolean` | `false` | 是否显示关闭按钮 |
| showIcon | `boolean` | `true` | 是否显示图标 |
| icon | `ReactNode` | - | 自定义图标 |
| animated | `boolean` | `true` | 是否显示动画 |
| animationDuration | `number` | `300` | 动画持续时间 |
| onShow | `() => void` | - | 显示时的回调 |
| onHide | `() => void` | - | 隐藏时的回调 |
| onClose | `() => void` | - | 关闭时的回调 |
| onClick | `(event: React.MouseEvent) => void` | - | 点击时的回调 |
| className | `string` | - | 自定义类名 |
| style | `CSSProperties` | - | 自定义样式 |

### ToastType

```ts
type ToastType = 'info' | 'success' | 'warning' | 'error' | 'loading';
```

### ToastPosition

```ts
type ToastPosition = 'top' | 'center' | 'bottom';
```

### ToastRef

| 方法 | 说明 | 参数 | 返回值 |
| --- | --- | --- | --- |
| element | 获取DOM元素引用 | - | `any` |
| show | 显示Toast | - | - |
| hide | 隐藏Toast | - | - |
| isVisible | 获取当前显示状态 | - | `boolean` |
| setMessage | 设置消息内容 | `message: ReactNode` | - |
| setType | 设置提示类型 | `type: ToastType` | - |
| setPosition | 设置显示位置 | `position: ToastPosition` | - |
| setDuration | 设置持续时间 | `duration: number` | - |

### 静态方法

#### Toast.show(config: ToastMethodConfig | string)
显示提示信息

#### Toast.info(config: ToastMethodConfig | string)
显示信息提示

#### Toast.success(config: ToastMethodConfig | string)
显示成功提示

#### Toast.warning(config: ToastMethodConfig | string)
显示警告提示

#### Toast.error(config: ToastMethodConfig | string)
显示错误提示

#### Toast.loading(config: ToastMethodConfig | string)
显示加载提示（默认不自动关闭）

#### Toast.hide()
关闭当前显示的提示

### ToastMethodConfig

| 参数 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| message | `ReactNode` | - | 消息内容 |
| type | `ToastType` | `'info'` | 提示类型 |
| position | `ToastPosition` | `'top'` | 显示位置 |
| duration | `number` | `3000` | 持续时间（毫秒） |
| closable | `boolean` | `false` | 是否显示关闭按钮 |
| showIcon | `boolean` | `true` | 是否显示图标 |
| icon | `ReactNode` | - | 自定义图标 |
| onClose | `() => void` | - | 关闭时的回调 |
| onClick | `(event: React.MouseEvent) => void` | - | 点击时的回调 |

## 使用提示

1. **推荐使用静态方法**：静态方法调用方式更简洁，适合大多数场景

2. **选择合适的提示类型**：
   - `success`：操作成功时使用
   - `error`：操作失败时使用
   - `warning`：需要用户注意时使用
   - `info`：普通提示信息
   - `loading`：加载中状态（不会自动关闭）

3. **设置合理的持续时间**：
   - 一般提示建议2-3秒
   - 重要信息可适当延长
   - 加载状态请设置为0（不自动关闭）

4. **选择合适的位置**：
   - `top`：默认位置，不遮挡主要内容
   - `center`：需要用户立即注意的信息
   - `bottom`：适合移动端使用

5. **性能优化**：
   - 避免频繁调用Toast
   - 同一时间只显示一个Toast
   - 使用静态方法时，组件会自动管理DOM

## 浏览器兼容性

| 浏览器 | 版本 |
| --- | --- |
| Chrome | ≥ 64 |
| Firefox | ≥ 67 |
| Safari | ≥ 12 |
| iOS Safari | ≥ 12 |
| Android Browser | ≥ 6.0 |
| Taro 小程序 | 支持 |
| H5 | 支持 |

## 无障碍支持

- 支持屏幕阅读器
- 提供适当的ARIA属性
- 确保颜色对比度符合WCAG标准
- 动画效果可被用户设置覆盖