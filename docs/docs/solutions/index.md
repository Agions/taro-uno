# 常用问题解决方案库

本模块整理了开发过程中常见的技术问题、错误提示及对应的详细解决步骤，帮助开发者快速定位和解决问题。

## 目录

- [安装与环境配置问题](#安装与环境配置问题)
- [组件使用问题](#组件使用问题)
- [构建与打包问题](#构建与打包问题)
- [运行时错误](#运行时错误)
- [性能优化问题](#性能优化问题)

## 安装与环境配置问题

### 问题1：安装依赖失败

**现象描述**：执行 `npm install` 时出现依赖安装失败，报错信息包含 "npm ERR!" 或 "yarn ERR!"。

**可能原因**：
- 网络连接问题
- Node.js 版本不兼容
- npm/yarn 版本问题
- 依赖包版本冲突

**解决方案**：
1. 检查网络连接，确保可以访问 npm 或 yarn 源
2. 确认 Node.js 版本符合项目要求（推荐使用 LTS 版本）
3. 更新 npm/yarn 到最新版本
4. 清除 npm/yarn 缓存：
   ```bash
   npm cache clean --force
   # 或
   yarn cache clean
   ```
5. 删除 `node_modules` 目录和 `package-lock.json`/`yarn.lock` 文件后重新安装

**预防措施**：
- 使用 `.nvmrc` 文件指定 Node.js 版本
- 定期更新依赖包，保持版本兼容性
- 使用 npm/yarn 工作区管理大型项目依赖

## 组件使用问题

### 问题2：组件样式不生效

**现象描述**：使用组件时，组件的样式与预期不符，或完全没有样式。

**可能原因**：
- 未正确引入组件样式
- 样式优先级问题
- 主题配置错误
- 组件版本不兼容

**解决方案**：
1. 检查是否已正确引入组件样式：
   ```jsx
   import 'taro-uno/dist/style/index.css';
   ```
2. 检查样式优先级，避免自定义样式被覆盖
3. 确认主题配置是否正确，特别是主题色、字体等全局样式
4. 检查组件版本是否与 Taro 版本兼容

**预防措施**：
- 遵循组件库的样式引入规范
- 使用 CSS Modules 或 styled-components 避免样式冲突
- 定期更新组件库到最新版本

## 构建与打包问题

### 问题3：构建失败，报错 "Module not found"

**现象描述**：执行 `npm run build` 时，出现 "Module not found: Error: Can't resolve 'xxx' in 'xxx'" 错误。

**可能原因**：
- 依赖包未安装
- 导入路径错误
- 模块名称拼写错误
- 构建配置错误

**解决方案**：
1. 确认相关依赖包已安装：
   ```bash
   npm install xxx --save
   ```
2. 检查导入路径是否正确，特别是相对路径和绝对路径的使用
3. 检查模块名称拼写是否正确
4. 检查 `tsconfig.json` 或 `webpack.config.js` 中的路径配置

**预防措施**：
- 使用 TypeScript 进行类型检查，提前发现导入错误
- 统一导入路径规范，避免混用相对路径和绝对路径
- 定期运行 `npm run lint` 检查代码规范

## 运行时错误

### 问题4：运行时出现 "View is not defined" 错误

**现象描述**：在 Taro 项目中运行时，出现 "ReferenceError: View is not defined" 错误。

**可能原因**：
- 未正确导入 Taro 内置组件
- 使用了 HTML 标签而不是 Taro 组件
- 组件命名错误

**解决方案**：
1. 确保已正确导入 Taro 内置组件：
   ```jsx
   import { View, Text } from '@tarojs/components';
   ```
2. 将所有 HTML 标签替换为对应的 Taro 组件（如 `div` → `View`，`p` → `Text`）
3. 检查组件名称拼写是否正确

**预防措施**：
- 遵循 Taro 组件规范，避免使用 HTML 标签
- 配置 ESLint 规则，自动检测并修复组件导入问题
- 使用 Taro 开发者工具进行代码检查

## 性能优化问题

### 问题5：页面加载缓慢

**现象描述**：页面首次加载时间过长，影响用户体验。

**可能原因**：
- 组件过多，渲染时间长
- 图片资源过大
- 网络请求过多或过慢
- 代码包体积过大

**解决方案**：
1. 优化组件渲染，使用 `shouldComponentUpdate` 或 `React.memo` 避免不必要的渲染
2. 压缩图片资源，使用适当的图片格式和尺寸
3. 合并网络请求，使用缓存策略减少请求次数
4. 优化代码包体积，使用 Tree Shaking 移除未使用的代码
5. 实现懒加载，按需加载组件和资源

**预防措施**：
- 遵循组件化开发原则，拆分大型组件
- 使用 CDN 加速静态资源加载
- 定期分析代码包体积，优化依赖关系
- 使用性能监控工具（如 Lighthouse）检测页面性能
